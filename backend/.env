# ============================================================
# memRagAgent 统一配置文件
# 所有服务共用此配置
# ============================================================

# ============================================================
# ChromaDB 向量数据库配置
# ============================================================
USE_CHROMADB=true
CHROMA_PERSIST_DIR=./chroma_data
# CHROMA_HOST=  # 远程模式时配置，本地模式留空
# CHROMA_PORT=8000

# ------------------------------------------------------------
# 数据库配置 (PostgreSQL)
# ------------------------------------------------------------
POSTGRES_HOST=118.178.183.54
POSTGRES_PORT=5432
POSTGRES_DB=daoyou
POSTGRES_USER=daoyou_user
POSTGRES_PASSWORD=1013966037zhy

# ------------------------------------------------------------
# 知识图谱配置 (Neo4j)
# ------------------------------------------------------------
NEO4J_URI=bolt://118.178.183.54:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=1013966037zhy
NEO4J_DB=neo4j

# ------------------------------------------------------------
# LLM 配置 - 主模型（用于回复生成）
# ------------------------------------------------------------
MODEL_NAME=deepseek-v3.2-exp
MODEL_PROVIDER=qwen
API_MODEL_KEYS=sk-435ef3bc9c434bc58d33377270ad87b7,sk-c98c930498b5490e847c61b171d3b5c5,sk-48b1fcb9c0be4e7ba8c8ef2f4d796c57,sk-549f638c464a47988484b70b36332dbe
API_MODEL_BASE=https://dashscope.aliyuncs.com/compatible-mode/v1
MODEL_MAX_TOKENS=6000
MODEL_TEMPERATURE=0.5

# ------------------------------------------------------------
# LLM 配置 - 意图模型（更快更便宜）
# ------------------------------------------------------------
INTENT_MODEL_NAME=qwen-flash
INTENT_API_KEYS=sk-c98c930498b5490e847c61b171d3b5c5,sk-549f638c464a47988484b70b36332dbe
INTENT_API_BASE=https://dashscope.aliyuncs.com/compatible-mode/v1
INTENT_MAX_TOKENS=2000
INTENT_TEMPERATURE=0.1

# ------------------------------------------------------------
# 向量模型配置 (Embedding)
# ------------------------------------------------------------
EMBEDDINGS_NAME=embedding-3
EMBEDDINGS_PROVIDER=zhipu
API_EMBEDDINGS_KEY=f7def1d8285a4b1da14f903a91a330a9.qwwPt8zwziMJIAmY
API_EMBEDDINGS_BASE=https://open.bigmodel.cn/api/paas/v4
EMBEDDINGS_MAX_TOKENS=5000
EMBEDDINGS_TEMPERATURE=0.7

# ------------------------------------------------------------
# Redis 缓存配置
# ------------------------------------------------------------
REDIS_URL=redis://:1013966037zhy@118.178.183.54:6379
REDIS_PASSWORD=1013966037zhy
REDIS_CACHE_TTL=300
REDIS_ENABLED=true

# ------------------------------------------------------------
# 服务地址配置
# ------------------------------------------------------------
MEMORY_SERVICE_URL=http://127.0.0.1:5000
KNOWLEDGE_SERVICE_URL=http://127.0.0.1:5001

# ------------------------------------------------------------
# Memory 服务配置
# ------------------------------------------------------------
# 画像自动刷新
PROFILE_AUTO_REFRESH_ENABLED=true
PROFILE_MIN_NEW_SEMANTIC_FOR_REFRESH=3
PROFILE_AUTO_JOB_MIN_NEW_SEMANTIC=5

# Job 调度（留空表示不限时间窗口）
JOB_SCHEDULER_ENABLED=true
JOB_RUN_WINDOW_EPISODIC=
JOB_RUN_WINDOW_SEMANTIC=
JOB_RUN_WINDOW_PROFILE=

# 自动生成记忆的最小消息数
EPISODIC_AUTO_MIN_MESSAGES=3

# Full Context 配置
FULL_CONTEXT_RECENT_MESSAGES=10
FULL_CONTEXT_RAG_TOP_K=5

# 统一记忆生成（合并 episodic + semantic 为一次 LLM 调用）
UNIFIED_MEMORY_GENERATION=true

# Prompt 自进化（有风险，默认关闭）
PROMPT_EVOLUTION_ENABLED=false

# ============================================================
# 认证配置
# ============================================================
# 是否启用 API 认证（生产环境务必设为 true）
AUTH_ENABLED=false

# 管理员 API Key（务必修改为强密钥！）
ADMIN_API_KEY=15948640987Zhy~

# 是否强制要求 project_id（生产环境应为 true）
REQUIRE_PROJECT_ID=false

# ============================================================
# 阿里云短信服务配置
# =========================================
ALIBABA_CLOUD_ACCESS_KEY_ID=LTAI5tAeeBfdeL2jKQcHMq53
ALIBABA_CLOUD_ACCESS_KEY_SECRET=teP5PgiyPYa6XGJ1WLs79MNXAFlYfn
ALIYUN_SMS_SIGN_NAME=玄谷智元人工智能应用软件
ALIYUN_SMS_TEMPLATE_CODE=SMS_324466603

# 微信小程序配置（必需）
WECHAT_APP_ID=wx139033de854c4068
WECHAT_APP_SECRET=16c93863b8fc7f2b0b7a500bdd4d3182

# 微信公众号配置（Web端扫码登录，可选）
WECHAT_MP_APP_ID=wx7050079abb2ea201
WECHAT_MP_APP_SECRET=155a78ab3def6d62af1b83b5f6ecfe08

#微信开放平台（Web端扫码登录，可选）
WECHAT_OPEN_APP_ID=wx630985a5978c209f
WECHAT_OPEN_APP_SECRET=b24755ae0a28d1eea0c727cbb8014a85

# 微信支付配置
WECHAT_MCH_ID=1724137490
WECHAT_API_KEY=15948640987ZHY1013966037WM023916
WECHAT_NOTIFY_URL=https://api.zdaoyou.chat/api/reward/payment-callback
WECHAT_CERT_PATH=D:\wechatpay\1724137490_20250814_cert\apiclient_cert.pem
WECHAT_KEY_PATH=D:\wechatpay\1724137490_20250814_cert\apiclient_key.pem


#MEMORY_BACKEND=http|local       # 默认 http
#KNOWLEDGE_BACKEND=http|local   # 默认 http
MEMORY_BACKEND=local       # 默认 http
KNOWLEDGE_BACKEND=local   # 默认 http