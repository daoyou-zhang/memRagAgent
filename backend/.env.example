# ============================================================
# memRagAgent 配置模板
# 复制此文件为 .env 并填写实际值
# ============================================================

# ============================================================
# ChromaDB 向量数据库配置
# ============================================================
USE_CHROMADB=true
CHROMA_PERSIST_DIR=./chroma_data
# CHROMA_HOST=  # 远程模式时配置，本地模式留空
# CHROMA_PORT=8000

# ------------------------------------------------------------
# 数据库配置 (PostgreSQL)
# ------------------------------------------------------------
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=memrag
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_password

# ------------------------------------------------------------
# Redis 缓存配置
# ------------------------------------------------------------
REDIS_URL=redis://:your_password@localhost:6379
REDIS_PASSWORD=your_password
REDIS_CACHE_TTL=300
REDIS_ENABLED=true

# ------------------------------------------------------------
# 知识图谱配置 (Neo4j)
# ------------------------------------------------------------
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=your_password
NEO4J_DB=neo4j

# ------------------------------------------------------------
# LLM 配置 - 主模型（用于回复生成）
# ------------------------------------------------------------
MODEL_NAME=deepseek-v3
MODEL_PROVIDER=qwen
API_MODEL_KEYS=sk-xxx,sk-yyy
API_MODEL_BASE=https://dashscope.aliyuncs.com/compatible-mode/v1
MODEL_MAX_TOKENS=6000
MODEL_TEMPERATURE=0.5

# ------------------------------------------------------------
# LLM 配置 - 意图模型（更快更便宜）
# ------------------------------------------------------------
INTENT_MODEL_NAME=qwen-flash
INTENT_API_KEYS=sk-xxx
INTENT_API_BASE=https://dashscope.aliyuncs.com/compatible-mode/v1
INTENT_MAX_TOKENS=2000
INTENT_TEMPERATURE=0.1

# ------------------------------------------------------------
# 向量模型配置 (Embedding)
# ------------------------------------------------------------
EMBEDDINGS_NAME=embedding-3
EMBEDDINGS_PROVIDER=zhipu
API_EMBEDDINGS_KEY=your_api_key
API_EMBEDDINGS_BASE=https://open.bigmodel.cn/api/paas/v4
EMBEDDINGS_MAX_TOKENS=5000
EMBEDDINGS_TEMPERATURE=0.7

# ------------------------------------------------------------
# 服务地址配置
# ------------------------------------------------------------
MEMORY_SERVICE_URL=http://127.0.0.1:5000
KNOWLEDGE_SERVICE_URL=http://127.0.0.1:5001

# ------------------------------------------------------------
# Memory 服务配置
# ------------------------------------------------------------
# 画像自动刷新
PROFILE_AUTO_REFRESH_ENABLED=true
PROFILE_MIN_NEW_SEMANTIC_FOR_REFRESH=3
PROFILE_AUTO_JOB_MIN_NEW_SEMANTIC=5

# Job 调度（留空表示不限时间窗口）
JOB_SCHEDULER_ENABLED=true
JOB_RUN_WINDOW_EPISODIC=
JOB_RUN_WINDOW_SEMANTIC=
JOB_RUN_WINDOW_PROFILE=

# 自动生成记忆的最小消息数
EPISODIC_AUTO_MIN_MESSAGES=3

# Full Context 配置
FULL_CONTEXT_RECENT_MESSAGES=10
FULL_CONTEXT_RAG_TOP_K=5

# 统一记忆生成（合并 episodic + semantic 为一次 LLM 调用）
UNIFIED_MEMORY_GENERATION=true

# Prompt 自进化（有风险，默认关闭）
PROMPT_EVOLUTION_ENABLED=false
